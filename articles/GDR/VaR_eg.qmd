---
title: "Application de la VaR"
sidebar: auto
author:
  - Cheryl Kouadio
categories: [risque, finance, gdr]
bibliography: ../../references.bib
---

# Introduction

Nous allons ici nous intéresser aux applications de la Value at Risk (VaR) en finance. La VaR est une mesure de risque qui permet d'estimer les pertes potentielles d'un portefeuille d'actifs financiers sur un horizon de temps donné, à un certain niveau de confiance. Elle est largement utilisée par les institutions financières pour évaluer et gérer les risques de marché, de crédit et de liquidité (cf. [Value at-Risk](var.qmd#sec-var-def))

# Import des données

Nous utilisons les données du cac 40 du 01/03/1990 au 10/05/2024. Le CAC 40 (Cotation Assistée en Continu) est l'indice boursier le plus important de la Bourse de Paris. Son nom signifie que c'est un indice composé des 40 sociétés françaises les plus significatives et les plus liquides cotées sur Euronext Paris, qui est l'une des principales places boursières en Europe.

```{python}
# Librairie où importer les données
import yfinance as yf

cac_40 = yf.Ticker("^FCHI")
ts_data = cac_40.history("max")
ts_data.index = ts_data.index.strftime('%Y-%m-%d')
ts_data.columns
```

Nous  nous interesserons plus particulièrement au prix de la clôture, c'est à dire, le prix final de l'indice à la fin de la session de trading sur Euronext Paris, qui est la bourse où l'indice est coté. Celà reflète l'impact des nouvelles économiques, des performances des entreprises comprises dans l'indice, et des mouvements généraux du marché.

Dans notre cas, nous l'utiliserons pour calculer le rendement logarithmique.
Le rendement logarithmique est le logarithme naturel du rapport entre le prix final et le prix initial d'un actif. Voici la formule mathématique :

$$ R_{\text{log}} = \ln\left(\frac{P_{\text{fin}}}{P_{\text{début}}}\right) $$

où :
- $R_{\text{log}}$ est le rendement logarithmique,
- $\ln$ représente le logarithme naturel,
- $P_{\text{fin}}$ est la valeur de clôture de l'actif à la fin de la période,
- $P_{\text{début}}$ est la valeur de clôture de l'actif au début de la période.

```{python}
ts_close = ts_data[[ 'Close']]
import pandas as pd
import numpy as np

#Nbre de NA
ts_close.isna().sum()

ts_close['log_return'] = np.log(ts_close['Close'] / ts_close['Close'].shift(1))
ts_close = ts_close.dropna(subset=['log_return'])
print(ts_close.head())
```


# Test de stationarité du log-rendement

Pour utiliser le log rendement comme variable profit et perte (PnL : Profit and Loss) pour impléter la VaR, nous devons tester sa stationarité. En effet, la stationarité est une propriété importante des séries temporelles financières. Une série temporelle est dite stationnaire si ses propriétés statistiques telles que la moyenne, la variance et la covariance restent constantes au fil du temps.

```{python}
import matplotlib.pyplot as plt
plt.figure(figsize=(12, 12))

fig, ax = plt.subplots(1)

ax.set_xlabel('Date')
ax.set_ylabel('historical log returns')
ax.plot(ts_close.index, ts_close['log_return'], color='blue')
ax.tick_params(axis='y')

plt.title('Historical Log-returns of CAC40')
plt.show()
```

Il semblerait que la série des rendements logarithmiques est stationnaire. Nous allons tout de même effectuer un test de stationarité pour confirmer cette hypothèse.

```{python}
from statsmodels.graphics.tsaplots import plot_acf, plot_pacf
fig, ax = plt.subplots(1,2, figsize=(8, 4))
plot_acf(ts_close['log_return'].dropna(), ax=ax[0],title='ACF')
plot_pacf(ts_close['log_return'].dropna(), ax=ax[1],title='PACF')
plt.show()
```

L'autocorrélation et l'autocorrélation partielle semblent être significatives pour les premières valeurs de la série. Nous allons effectuer un test de Dickey-Fuller augmenté (ADF) pour tester la stationarité de la série.


```{python}
from statsmodels.tsa.stattools import adfuller
adf_result = adfuller(ts_close['log_return'].dropna(), regression='ct')
print(f"ADF Statistic: {adf_result[0]}" and f"p-value: {adf_result[1]}")
adf_result
```

La p-value est environ égale à 0, ce qui signifie que nous rejetons l'hypothèse nulle selon laquelle la série n'est pas stationnaire. Ainsi la série des log-rendements est stationnaire. Nous pouvons donc utiliser les rendements logarithmiques pour calculer la VaR.

# Modélisation de la VaR